<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Artículo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="config.js"></script>
</head>

<body class="bg-gray-100 text-gray-800 flex flex-col items-center p-6">
    <h1 class="text-3xl font-bold mb-4">Publicar Nuevo Artículo</h1>
    <form id="postForm" class="w-full max-w-md bg-white p-6 rounded shadow-md">
        <label for="title" class="block text-sm font-medium mb-1">Título</label>
        <input type="text" name="title" id="title" class="w-full mb-4 p-2 border rounded" required>

        <label for="content" class="block text-sm font-medium mb-1">Contenido</label>
        <textarea name="content" id="content" class="w-full mb-4 p-2 border rounded" required></textarea>

        <button type="submit" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">Publicar</button>
    </form>
    <a href="index.html" class="mt-4 text-blue-500 hover:underline">Regresar al Inicio</a>

    <script type="module">
        import { API_URL } from './config.js';

        document.getElementById("postForm").onsubmit = async function (event) {
            event.preventDefault();
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;

            await fetch(`${API_URL}/posts`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ title, content })
            });
            window.location.href = "index.html";
        };
    </script>
</body>

</html>